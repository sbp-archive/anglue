{"version":3,"sources":["../../../src/behaviors/sortable-component.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;MAKa,yBAAyB;cAAzB,yBAAyB;;AACzB,aADA,yBAAyB,CACxB,QAAQ,EAA2B;uEAAJ,EAAE;;UAAtB,OAAO,QAAP,OAAO;UAAE,OAAO,QAAP,OAAO;;4BAD5B,yBAAyB;;AAElC,iCAFS,yBAAyB,8CAEzB,SAAS,EAAE;;AAEpB,UAAI,CAAC,OAAO,GAAG,OAAO,CAAC;;AAEvB,UAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AACpB,YAAM,SAAS,GAAG,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC;AACpE,cAAM,IAAI,KAAK,mCAAgC,OAAO,wBAAkB,SAAS,CAAG,CAAC;OACtF;;AAED,UAAI,OAAO,EAAE;AACX,YAAI,CAAC,cAAc,GAAG,OAAO,CAAC;OAC/B;KACF;;iBAdU,yBAAyB;;WAgBtB,eAAG;AACf,eAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;OACpC;;;WAEiB,aAAC,cAAc,EAAE;AACjC,YAAI,CAAC,eAAe,GAAG,cAAc,CAAC;AACtC,YAAI,cAAc,KAAK,IAAI,EAAE;AAC3B,cAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;SAC7B,MAAM;AACL,cAAI,CAAC,UAAU,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;SAC5C;OACF;WAEiB,eAAG;AACnB,eAAO,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC;OACrC;;;WA/BU,yBAAyB;eAJ9B,QAAQ;;;;AAsCT,WAAS,iBAAiB,GAAc;QAAb,MAAM,yDAAG,EAAE;;AAC3C,WAAO,UAAA,GAAG,EAAI;AACZ,UAAI,cAAc,GAAG,MAAM,CAAC;AAC5B,UAAI,qBAAQ,QAAQ,CAAC,MAAM,CAAC,EAAE;AAC5B,sBAAc,GAAG,EAAC,OAAO,EAAE,MAAM,EAAC,CAAC;OACpC;;AAED,UAAI,CAAC,cAAc,CAAC,MAAM,EAAE;AAC1B,sBAAc,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,YA5CpC,sBAAsB,CA4CsC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;OACjF;AACD,UAAI,CAAC,cAAc,CAAC,OAAO,EAAE;AAC3B,sBAAc,CAAC,OAAO,GAAM,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,YAAS,CAAC;OAC1E;;AAED,iBAnDI,WAAW,EAmDH,GAAG,EAAE,yBAAyB,EAAE;AAC1C,gBAAQ,EAAE,mBAAmB;AAC7B,cAAM,EAAE,cAAc;AACtB,aAAK,EAAE,CAAC,gBAAgB,CAAC;OAC1B,CAAC,CAAC;KACJ,CAAC;GACH","file":"sortable-component.js","sourcesContent":["import angular from 'angular';\nimport {Behavior} from './behavior';\nimport {addBehavior} from '../utils';\nimport {COMPONENT_ENTITY_REGEX} from '../component';\n\nexport class SortableComponentBehavior extends Behavior {\n  constructor(instance, {actions, initial} = {}) {\n    super(...arguments);\n\n    this.actions = actions;\n\n    if (!this.actionsRef) {\n      const className = Reflect.getPrototypeOf(instance).constructor.name;\n      throw new Error(`SortableComponentBehavior: '${actions}' not found on ${className}`);\n    }\n\n    if (initial) {\n      this.sortExpression = initial;\n    }\n  }\n\n  get actionsRef() {\n    return this.instance[this.actions];\n  }\n\n  set sortExpression(sortExpression) {\n    this._sortExpression = sortExpression;\n    if (sortExpression === null) {\n      this.actionsRef.clearSort();\n    } else {\n      this.actionsRef.changeSort(sortExpression);\n    }\n  }\n\n  get sortExpression() {\n    return this._sortExpression || null;\n  }\n}\n\nexport function SortableComponent(config = {}) {\n  return cls => {\n    let preparedConfig = config;\n    if (angular.isString(config)) {\n      preparedConfig = {actions: config};\n    }\n\n    if (!preparedConfig.entity) {\n      preparedConfig.entity = cls.name.match(COMPONENT_ENTITY_REGEX)[1].toLowerCase();\n    }\n    if (!preparedConfig.actions) {\n      preparedConfig.actions = `${preparedConfig.entity.toLowerCase()}Actions`;\n    }\n\n    addBehavior(cls, SortableComponentBehavior, {\n      property: 'sortableComponent',\n      config: preparedConfig,\n      proxy: ['sortExpression']\n    });\n  };\n}\n"]}