{"version":3,"sources":["../../../src/behaviors/sortable-component.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;MAKa,yBAAyB;cAAzB,yBAAyB;;AACzB,aADA,yBAAyB,CACxB,QAAQ,EAAyB;uEAAJ,EAAE;;UAApB,OAAO,QAAP,OAAO;UAAE,KAAK,QAAL,KAAK;;4BAD1B,yBAAyB;;AAElC,iCAFS,yBAAyB,8CAEzB,SAAS,EAAE;;AAEpB,UAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,UAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;AAEnB,UAAM,SAAS,GAAG,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC;AACpE,UAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AACpB,cAAM,IAAI,KAAK,mCAAgC,OAAO,wBAAkB,SAAS,CAAG,CAAC;OACtF;AACD,UAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AAClB,cAAM,IAAI,KAAK,mCAAgC,KAAK,wBAAkB,SAAS,CAAG,CAAC;OACpF;KACF;;iBAdU,yBAAyB;;WAgBtB,eAAG;AACf,eAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;OACpC;;;WAEW,eAAG;AACb,eAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OAClC;;;WAEiB,aAAC,cAAc,EAAE;AACjC,YAAI,cAAc,KAAK,IAAI,EAAE;AAC3B,cAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;SAC7B,MAAM;AACL,cAAI,CAAC,UAAU,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;SAC5C;OACF;WAEiB,eAAG;AACnB,eAAO,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;OACrC;;;WAlCU,yBAAyB;eAJ9B,QAAQ;;;;AAyCT,WAAS,iBAAiB,GAAc;QAAb,MAAM,yDAAG,EAAE;;AAC3C,WAAO,UAAA,GAAG,EAAI;AACZ,UAAI,cAAc,GAAG,MAAM,CAAC;AAC5B,UAAI,qBAAQ,QAAQ,CAAC,MAAM,CAAC,EAAE;AAC5B,sBAAc,GAAG,EAAC,OAAO,EAAE,MAAM,EAAC,CAAC;OACpC;;AAED,UAAI,CAAC,cAAc,CAAC,MAAM,EAAE;AAC1B,sBAAc,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,YA/CpC,sBAAsB,CA+CsC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;OACjF;AACD,UAAI,CAAC,cAAc,CAAC,OAAO,EAAE;AAC3B,sBAAc,CAAC,OAAO,GAAM,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,YAAS,CAAC;OAC1E;AACD,UAAI,CAAC,cAAc,CAAC,KAAK,EAAE;AACzB,sBAAc,CAAC,KAAK,GAAM,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,UAAO,CAAC;OACtE;;AAED,iBAzDI,WAAW,EAyDH,GAAG,EAAE,yBAAyB,EAAE;AAC1C,gBAAQ,EAAE,mBAAmB;AAC7B,cAAM,EAAE,cAAc;AACtB,aAAK,EAAE,CAAC,gBAAgB,CAAC;OAC1B,CAAC,CAAC;KACJ,CAAC;GACH","file":"sortable-component.js","sourcesContent":["import angular from 'angular';\nimport {Behavior} from './behavior';\nimport {addBehavior} from '../utils';\nimport {COMPONENT_ENTITY_REGEX} from '../component';\n\nexport class SortableComponentBehavior extends Behavior {\n  constructor(instance, {actions, store} = {}) {\n    super(...arguments);\n\n    this.actions = actions;\n    this.store = store;\n\n    const className = Reflect.getPrototypeOf(instance).constructor.name;\n    if (!this.actionsRef) {\n      throw new Error(`SortableComponentBehavior: '${actions}' not found on ${className}`);\n    }\n    if (!this.storeRef) {\n      throw new Error(`SortableComponentBehavior: '${store}' not found on ${className}`);\n    }\n  }\n\n  get actionsRef() {\n    return this.instance[this.actions];\n  }\n\n  get storeRef() {\n    return this.instance[this.store];\n  }\n\n  set sortExpression(sortExpression) {\n    if (sortExpression === null) {\n      this.actionsRef.clearSort();\n    } else {\n      this.actionsRef.changeSort(sortExpression);\n    }\n  }\n\n  get sortExpression() {\n    return this.storeRef.sortExpression;\n  }\n}\n\nexport function SortableComponent(config = {}) {\n  return cls => {\n    let preparedConfig = config;\n    if (angular.isString(config)) {\n      preparedConfig = {actions: config};\n    }\n\n    if (!preparedConfig.entity) {\n      preparedConfig.entity = cls.name.match(COMPONENT_ENTITY_REGEX)[1].toLowerCase();\n    }\n    if (!preparedConfig.actions) {\n      preparedConfig.actions = `${preparedConfig.entity.toLowerCase()}Actions`;\n    }\n    if (!preparedConfig.store) {\n      preparedConfig.store = `${preparedConfig.entity.toLowerCase()}Store`;\n    }\n\n    addBehavior(cls, SortableComponentBehavior, {\n      property: 'sortableComponent',\n      config: preparedConfig,\n      proxy: ['sortExpression']\n    });\n  };\n}\n"]}