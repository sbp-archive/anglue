{"version":3,"sources":["../../../src/behaviors/searchable-component.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;MAKa,2BAA2B;cAA3B,2BAA2B;;AAC3B,aADA,2BAA2B,CAC1B,QAAQ,EAAyB;uEAAJ,EAAE;;UAApB,OAAO,QAAP,OAAO;UAAE,KAAK,QAAL,KAAK;;4BAD1B,2BAA2B;;AAEpC,iCAFS,2BAA2B,8CAE3B,SAAS,EAAE;;AAEpB,UAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,UAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;AAEnB,UAAM,SAAS,GAAG,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC;AACpE,UAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AACpB,cAAM,IAAI,KAAK,qCAAkC,OAAO,wBAAkB,SAAS,CAAG,CAAC;OACxF;AACD,UAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AAClB,cAAM,IAAI,KAAK,qCAAkC,KAAK,wBAAkB,SAAS,CAAG,CAAC;OACtF;KACF;;iBAdU,2BAA2B;;WAgBxB,eAAG;AACf,eAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;OACpC;;;WAEW,eAAG;AACb,eAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OAClC;;;WAEa,aAAC,UAAU,EAAE;AACzB,YAAI,UAAU,KAAK,IAAI,EAAE;AACvB,cAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;SAC/B,MAAM;AACL,cAAI,CAAC,UAAU,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;SAC1C;OACF;WAEa,eAAG;AACf,eAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;OACjC;;;WAlCU,2BAA2B;eAJhC,QAAQ;;;;AAyCT,WAAS,mBAAmB,GAAc;QAAb,MAAM,yDAAG,EAAE;;AAC7C,WAAO,UAAA,GAAG,EAAI;AACZ,UAAI,cAAc,GAAG,MAAM,CAAC;AAC5B,UAAI,qBAAQ,QAAQ,CAAC,MAAM,CAAC,EAAE;AAC5B,sBAAc,GAAG,EAAC,OAAO,EAAE,MAAM,EAAC,CAAC;OACpC;;AAED,UAAI,CAAC,cAAc,CAAC,MAAM,EAAE;AAC1B,sBAAc,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,YA/CpC,sBAAsB,CA+CsC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;OACjF;AACD,UAAI,CAAC,cAAc,CAAC,OAAO,EAAE;AAC3B,sBAAc,CAAC,OAAO,GAAM,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,YAAS,CAAC;OAC1E;AACD,UAAI,CAAC,cAAc,CAAC,KAAK,EAAE;AACzB,sBAAc,CAAC,KAAK,GAAM,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,UAAO,CAAC;OACtE;;AAED,iBAzDI,WAAW,EAyDH,GAAG,EAAE,2BAA2B,EAAE;AAC5C,gBAAQ,EAAE,qBAAqB;AAC/B,cAAM,EAAE,cAAc;AACtB,aAAK,EAAE,CAAC,YAAY,CAAC;OACtB,CAAC,CAAC;KACJ,CAAC;GACH","file":"searchable-component.js","sourcesContent":["import angular from 'angular';\nimport {Behavior} from './behavior';\nimport {addBehavior} from '../utils';\nimport {COMPONENT_ENTITY_REGEX} from '../component';\n\nexport class SearchableComponentBehavior extends Behavior {\n  constructor(instance, {actions, store} = {}) {\n    super(...arguments);\n\n    this.actions = actions;\n    this.store = store;\n\n    const className = Reflect.getPrototypeOf(instance).constructor.name;\n    if (!this.actionsRef) {\n      throw new Error(`SearchableComponentBehavior: '${actions}' not found on ${className}`);\n    }\n    if (!this.storeRef) {\n      throw new Error(`SearchableComponentBehavior: '${store}' not found on ${className}`);\n    }\n  }\n\n  get actionsRef() {\n    return this.instance[this.actions];\n  }\n\n  get storeRef() {\n    return this.instance[this.store];\n  }\n\n  set searchText(searchText) {\n    if (searchText === null) {\n      this.actionsRef.clearSearch();\n    } else {\n      this.actionsRef.changeSearch(searchText);\n    }\n  }\n\n  get searchText() {\n    return this.storeRef.searchText;\n  }\n}\n\nexport function SearchableComponent(config = {}) {\n  return cls => {\n    let preparedConfig = config;\n    if (angular.isString(config)) {\n      preparedConfig = {actions: config};\n    }\n\n    if (!preparedConfig.entity) {\n      preparedConfig.entity = cls.name.match(COMPONENT_ENTITY_REGEX)[1].toLowerCase();\n    }\n    if (!preparedConfig.actions) {\n      preparedConfig.actions = `${preparedConfig.entity.toLowerCase()}Actions`;\n    }\n    if (!preparedConfig.store) {\n      preparedConfig.store = `${preparedConfig.entity.toLowerCase()}Store`;\n    }\n\n    addBehavior(cls, SearchableComponentBehavior, {\n      property: 'searchableComponent',\n      config: preparedConfig,\n      proxy: ['searchText']\n    });\n  };\n}\n"]}